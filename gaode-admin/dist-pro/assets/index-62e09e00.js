import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-b07c8c79.js";import{u as a,_ as s,a as t}from"./RightToolbar.vue_vue_type_script_setup_true_lang-44d08f8c.js";import{a0 as l,L as o,e as i,P as p,r,w as n,K as d,aa as m,o as u,l as c,m as h,x as _,k as b,y as w,ab as f,D as v}from"./index-dc787e95.js";import{E as j}from"./el-button-adf54e9f.js";import{E as g}from"./el-switch-54b2e8b0.js";import{a as x}from"./el-col-8a867eaa.js";import{_ as y}from"./Dialog.vue_vue_type_style_index_0_lang-62a93a72.js";import{_ as R}from"./Detail.vue_vue_type_script_setup_true_lang-503c06de.js";import{_ as k}from"./Search.vue_vue_type_script_setup_true_lang-d97129cd.js";import"./el-card-4ec964b4.js";import"./el-popper-06627937.js";import"./use-form-common-props-e92a1987.js";import"./el-popover-85004fb7.js";import"./el-checkbox-8998332c.js";import"./event-5568c9d8.js";import"./use-form-item-cb2ecb0c.js";import"./el-divider-7e837124.js";import"./useForm-0cf5fadd.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./index-7a6ce827.js";import"./index-2bc17c13.js";import"./el-overlay-9a40cbcb.js";import"./vnode-7d8ea85e.js";import"./el-dropdown-item-978ba092.js";import"./use-dialog-30a6a371.js";import"./Descriptions-92b0e991.js";const z=e=>l.get({url:"/vadmin/record/operations",params:e}),P=o([{field:"user_id",label:"操作人编号",show:!0,disabled:!0,width:"100px",span:24},{field:"user_name",label:"操作人",show:!0,disabled:!0,width:"100px",span:24},{field:"telephone",label:"手机号",show:!0,disabled:!0,width:"130px",span:24},{field:"request_method",label:"请求方法",show:!0,disabled:!0,width:"100px",span:24},{field:"client_ip",label:"客户端地址",width:"130px",show:!0,disabled:!0,span:24},{field:"tags",label:"标签",width:"130px",show:!0,span:24},{field:"summary",label:"操作内容",show:!0,span:24},{field:"description",label:"描述",show:!1,span:24},{field:"status_code",label:"操作状态",show:!0,width:"100px",span:24},{field:"route_name",label:"接口函数",show:!1,width:"150px",span:24},{field:"api_path",label:"接口地址",show:!1,span:24},{field:"params",label:"请求参数",show:!1,span:24},{field:"browser",label:"浏览器",show:!0,width:"150px",span:24},{field:"system",label:"系统",show:!1,width:"150px",span:24},{field:"process_time",label:"总耗时",show:!0,span:24},{field:"create_datetime",label:"操作时间",show:!0,span:24},{field:"action",width:"100px",label:"操作",show:!0,disabled:!0,span:24}]),S=o([{field:"telephone",label:"手机号",component:"Input",componentProps:{clearable:!1}},{field:"request_method",label:"请求方法",component:"Input",componentProps:{clearable:!1}},{field:"summary",label:"操作内容",component:"Input",componentProps:{clearable:!1}}]),L={class:"mb-8px flex justify-between"},D=i({name:"SystemRecordOperation",setup(l){const{wsCache:o}=p(),{register:i,elTableRef:D,tableObject:U,methods:C}=a({getListApi:z,response:{data:"data",count:"count"}}),G=r(!1),I=r(""),{getList:O,setSearchParams:V}=C;O();const q=r("default");n(q,(e=>{q.value=e}));const E=d().currentRoute.value.fullPath;return n(P,(async e=>{var a;o.set(E,JSON.stringify(e)),await m(),null==(a=D.value)||a.doLayout()}),{deep:!0}),(a,l)=>(u(),c(b(e),null,{default:h((()=>[_(b(k),{schema:b(S),onSearch:b(V),onReset:b(V)},null,8,["schema","onSearch","onReset"]),w("div",L,[_(b(x)),_(b(s),{onGetList:b(O),"table-size":q.value,"onUpdate:tableSize":l[0]||(l[0]=e=>q.value=e),columns:b(P),"onUpdate:columns":l[1]||(l[1]=e=>f(P)?P.value=e:null),"cache-table-headers-key":b(E)},null,8,["onGetList","table-size","columns","cache-table-headers-key"])]),_(b(t),{limit:b(U).limit,"onUpdate:limit":l[2]||(l[2]=e=>b(U).limit=e),page:b(U).page,"onUpdate:page":l[3]||(l[3]=e=>b(U).page=e),columns:b(P),data:b(U).tableData,loading:b(U).loading,selection:!1,size:q.value,border:!0,pagination:{total:b(U).count},onRegister:b(i)},{action:h((({row:e})=>[_(b(j),{type:"primary",link:"",size:"small",onClick:a=>(e=>{I.value="操作记录",U.currentRow=e,G.value=!0})(e)},{default:h((()=>[v(" 详情 ")])),_:2},1032,["onClick"])])),status:h((({row:e})=>[_(b(g),{value:e.status,size:"small",disabled:""},null,8,["value"])])),_:1},8,["limit","page","columns","data","loading","size","pagination","onRegister"]),_(b(y),{modelValue:G.value,"onUpdate:modelValue":l[4]||(l[4]=e=>G.value=e),title:I.value,width:"900px"},{default:h((()=>[_(R,{"detail-schema":b(P),"current-row":b(U).currentRow},null,8,["detail-schema","current-row"])])),_:1},8,["modelValue","title"])])),_:1}))}});export{D as default};
