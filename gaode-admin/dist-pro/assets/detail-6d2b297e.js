import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-b07c8c79.js";import{u as a,_ as t,a as l}from"./RightToolbar.vue_vue_type_script_setup_true_lang-44d08f8c.js";import{a as s,b as o,d as i,c as r,e as u,p as n}from"./dict-416d98d1.js";import{c as p,s as m,_ as d}from"./DetailWrite.vue_vue_type_script_setup_true_lang-b489e627.js";import{_ as c}from"./Dialog.vue_vue_type_style_index_0_lang-62a93a72.js";import{e as v,P as _,K as f,G as y,r as g,w as j,aa as h,o as w,l as b,m as x,x as k,k as D,y as R,D as C,z as L,ab as S,a6 as z}from"./index-dc787e95.js";import{E as P}from"./el-button-adf54e9f.js";import{a as U,E as V}from"./el-col-8a867eaa.js";import{_ as A}from"./Search.vue_vue_type_script_setup_true_lang-d97129cd.js";import"./el-card-4ec964b4.js";import"./el-popper-06627937.js";import"./use-form-common-props-e92a1987.js";import"./el-popover-85004fb7.js";import"./el-checkbox-8998332c.js";import"./event-5568c9d8.js";import"./use-form-item-cb2ecb0c.js";import"./el-divider-7e837124.js";import"./useForm-0cf5fadd.js";import"./el-switch-54b2e8b0.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./index-7a6ce827.js";import"./index-2bc17c13.js";import"./el-overlay-9a40cbcb.js";import"./vnode-7d8ea85e.js";import"./el-dropdown-item-978ba092.js";import"./useValidator-ce35917e.js";import"./use-dialog-30a6a371.js";const F={class:"mb-8px flex justify-between"},G=v({name:"SystemDictDetail",setup(v){const{wsCache:G}=_(),{currentRoute:T}=f(),{t:E}=y();let O=T.value.query.dictType;const W=g([]);(async()=>{const e=await s();e&&W.value.push({field:"dict_type_id",path:"componentProps.options",value:e.data})})(),"string"==typeof O&&W.value.push({field:"dict_type_id",path:"value",value:parseInt(O)});const{register:q,elTableRef:I,tableObject:J,methods:K}=a({getListApi:o,delListApi:i,response:{data:"data",count:"count"}});J.params={dict_type_id:O};const N=g(!1),Q=g(""),X=g(""),Y=g(!1),Z=()=>{Q.value=E("exampleDemo.add"),J.currentRow=null,N.value=!0,X.value="add"},$=g(),B=async()=>{var e;const a=D($);await(null==(e=null==a?void 0:a.elFormRef)?void 0:e.validate((async e=>{if(e){Y.value=!0;let e=await(null==a?void 0:a.getFormData());if(!e)return Y.value=!1,z.error("未获取到数据");e.dict_type_id=O;try{const a=g({});"add"===X.value?(a.value=await u(e),a.value&&(N.value=!1,H())):"edit"===X.value&&(a.value=await n(e),a.value&&(N.value=!1,H()))}finally{Y.value=!1}}})))},{getList:H,setSearchParams:M}=K;H();const ee=g("default");j(ee,(e=>{ee.value=e}));const ae=T.value.fullPath;return j(p,(async e=>{var a;G.set(ae,JSON.stringify(e)),await h(),null==(a=I.value)||a.doLayout()}),{deep:!0}),(a,s)=>(w(),b(D(e),null,{default:x((()=>[k(D(A),{schema:D(m),setSchemaList:W.value,onSearch:D(M),onReset:D(M)},null,8,["schema","setSchemaList","onSearch","onReset"]),R("div",F,[k(D(U),{gutter:10},{default:x((()=>[k(D(V),{span:1.5},{default:x((()=>[k(D(P),{type:"primary",onClick:Z},{default:x((()=>[C(L(D(E)("exampleDemo.add")),1)])),_:1})])),_:1})])),_:1}),k(D(t),{onGetList:D(H),"table-size":ee.value,"onUpdate:tableSize":s[0]||(s[0]=e=>ee.value=e),columns:D(p),"onUpdate:columns":s[1]||(s[1]=e=>S(p)?p.value=e:null),"cache-table-headers-key":D(ae)},null,8,["onGetList","table-size","columns","cache-table-headers-key"])]),k(D(l),{limit:D(J).limit,"onUpdate:limit":s[2]||(s[2]=e=>D(J).limit=e),page:D(J).page,"onUpdate:page":s[3]||(s[3]=e=>D(J).page=e),data:D(J).tableData,loading:D(J).loading,columns:D(p),selection:!1,pagination:{total:D(J).count},border:!0,size:ee.value,onRegister:D(q)},{action:x((({row:e})=>[k(D(P),{type:"primary",link:"",size:"small",onClick:a=>(async e=>{const a=await r(e.id);a&&(Q.value="编辑",J.currentRow=a.data,N.value=!0,X.value="edit")})(e)},{default:x((()=>[C(L(D(E)("exampleDemo.edit")),1)])),_:2},1032,["onClick"]),k(D(P),{type:"danger",link:"",size:"small",onClick:a=>(async e=>{const{delListApi:a}=K;await a(!0,[e.id])})(e)},{default:x((()=>[C(L(D(E)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["limit","page","data","loading","columns","pagination","size","onRegister"]),k(D(c),{modelValue:N.value,"onUpdate:modelValue":s[5]||(s[5]=e=>N.value=e),title:Q.value,width:"600px"},{footer:x((()=>[k(D(P),{type:"primary",loading:Y.value,onClick:B},{default:x((()=>[C(L(D(E)("exampleDemo.save")),1)])),_:1},8,["loading"]),k(D(P),{onClick:s[4]||(s[4]=e=>N.value=!1)},{default:x((()=>[C(L(D(E)("dialogDemo.close")),1)])),_:1})])),default:x((()=>[k(d,{ref_key:"writeRef",ref:$,"current-row":D(J).currentRow},null,8,["current-row"])])),_:1},8,["modelValue","title"])])),_:1}))}});export{G as default};
