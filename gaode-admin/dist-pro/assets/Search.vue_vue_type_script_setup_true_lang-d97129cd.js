import{u as e,F as a}from"./useForm-0cf5fadd.js";import{e as t,a4 as s,G as o,r as n,f as i,bu as l,k as r,bY as c,bZ as d,a8 as m,o as u,j as f,x as p,m as h,l as y,D as b,z as x,M as g,n as k,W as v}from"./index-dc787e95.js";import{E as w}from"./el-button-adf54e9f.js";const F={key:0},_=t({__name:"Search",props:{schema:{type:Array,default:()=>[]},setSchemaList:{type:Array,default:()=>[]},isCol:s.bool.def(!1),labelWidth:s.oneOfType([String,Number]).def("auto"),layout:s.string.validate((e=>["inline","bottom"].includes(e))).def("inline"),buttomPosition:s.string.validate((e=>["left","center","right"].includes(e))).def("center"),showSearch:s.bool.def(!0),showReset:s.bool.def(!0),expand:s.bool.def(!1),expandField:s.string.def(""),inline:s.bool.def(!0),model:{type:Object,default:()=>({})}},emits:["search","reset"],setup(t,{emit:s}){const _=t,{t:C}=o(),S=n(!0),R=i((()=>{let e=l(_.schema);if(_.expand&&_.expandField&&!r(S)){const a=c(e,(e=>e.field===_.expandField));if(a>-1){const t=e.length;e.splice(a+1,t)}}for(const a of e)for(const e of _.setSchemaList)a.field===e.field&&d(a,e.path,e.value);return"inline"===_.layout&&(e=e.concat([{field:"action",formItemProps:{labelWidth:"0px"}}])),e})),{register:j,elFormRef:W,methods:q}=e({model:_.model||{}}),z=async()=>{var e;await(null==(e=r(W))?void 0:e.validate((async e=>{if(e){const{getFormData:e}=q,a=await e();s("search",a)}})))},A=async()=>{var e;null==(e=r(W))||e.resetFields();const{getFormData:a}=q,t=await a();s("reset",t)},D=i((()=>({textAlign:_.buttomPosition}))),P=()=>{var e;null==(e=r(W))||e.resetFields(),S.value=!r(S)};return(e,s)=>{const o=m("Icon");return u(),f(v,null,[p(r(a),{"is-custom":!1,"label-width":t.labelWidth,"hide-required-asterisk":"",inline:t.inline,"is-col":t.isCol,schema:R.value,onRegister:r(j)},{action:h((()=>["inline"===t.layout?(u(),f("div",F,[t.showSearch?(u(),y(r(w),{key:0,type:"primary",size:"small",onClick:z},{default:h((()=>[p(o,{icon:"ep:search",class:"mr-5px"}),b(" "+x(r(C)("common.query")),1)])),_:1})):g("",!0),t.showReset?(u(),y(r(w),{key:1,size:"small",onClick:A},{default:h((()=>[p(o,{icon:"ep:refresh-right",class:"mr-5px"}),b(" "+x(r(C)("common.reset")),1)])),_:1})):g("",!0),t.expand?(u(),y(r(w),{key:2,text:"",onClick:P},{default:h((()=>[b(x(r(C)(S.value?"common.shrink":"common.expand"))+" ",1),p(o,{icon:S.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):g("",!0)])):g("",!0)])),_:1},8,["label-width","inline","is-col","schema","onRegister"]),"bottom"===t.layout?(u(),f("div",{key:0,style:k(D.value)},[t.showSearch?(u(),y(r(w),{key:0,type:"primary",onClick:z},{default:h((()=>[p(o,{icon:"ep:search",class:"mr-5px"}),b(" "+x(r(C)("common.query")),1)])),_:1})):g("",!0),t.showReset?(u(),y(r(w),{key:1,onClick:A},{default:h((()=>[p(o,{icon:"ep:refresh-right",class:"mr-5px"}),b(" "+x(r(C)("common.reset")),1)])),_:1})):g("",!0),t.expand?(u(),y(r(w),{key:2,text:"",onClick:P},{default:h((()=>[b(x(r(C)(S.value?"common.shrink":"common.expand"))+" ",1),p(o,{icon:S.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):g("",!0)],4)):g("",!0)],64)}}});export{_};
