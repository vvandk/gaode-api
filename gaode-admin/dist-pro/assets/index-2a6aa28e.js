import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-b07c8c79.js";import{u as a,_ as t,a as l}from"./RightToolbar.vue_vue_type_script_setup_true_lang-44d08f8c.js";import{f as o,h as s,i,j as r,k as n}from"./dict-416d98d1.js";import{c as u,s as p,_ as m}from"./Write.vue_vue_type_script_setup_true_lang-187a1968.js";import{_ as c}from"./Dialog.vue_vue_type_style_index_0_lang-62a93a72.js";import{e as d,P as v,K as _,G as y,r as f,w as g,aa as j,a8 as w,o as h,l as k,m as b,x,k as C,y as D,D as R,z,ab as L,di as S,a6 as U}from"./index-dc787e95.js";import{E as P}from"./el-button-adf54e9f.js";import{a as V,E as A}from"./el-col-8a867eaa.js";import{_ as F}from"./Search.vue_vue_type_script_setup_true_lang-d97129cd.js";import"./el-card-4ec964b4.js";import"./el-popper-06627937.js";import"./use-form-common-props-e92a1987.js";import"./el-popover-85004fb7.js";import"./el-checkbox-8998332c.js";import"./event-5568c9d8.js";import"./use-form-item-cb2ecb0c.js";import"./el-divider-7e837124.js";import"./useForm-0cf5fadd.js";import"./el-switch-54b2e8b0.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./index-7a6ce827.js";import"./index-2bc17c13.js";import"./el-overlay-9a40cbcb.js";import"./vnode-7d8ea85e.js";import"./el-dropdown-item-978ba092.js";import"./useValidator-ce35917e.js";import"./use-dialog-30a6a371.js";const G={class:"mb-8px flex justify-between"},T=d({name:"SystemDict",setup(d){const{wsCache:T}=v(),{push:E}=_(),{t:O}=y(),{register:W,elTableRef:$,tableObject:I,methods:J}=a({getListApi:o,delListApi:s,response:{data:"data",count:"count"}}),K=f(!1),N=f(""),Q=f(""),X=f(!1),Y=()=>{N.value=O("exampleDemo.add"),I.currentRow=null,K.value=!0,Q.value="add"},Z=f(),q=async()=>{var e;const a=C(Z);await(null==(e=null==a?void 0:a.elFormRef)?void 0:e.validate((async e=>{if(e){X.value=!0;let e=await(null==a?void 0:a.getFormData());if(!e)return X.value=!1,U.error("未获取到数据");const t=f({});try{"add"===Q.value?(t.value=await r(e),t.value&&(K.value=!1,B())):"edit"===Q.value&&(t.value=await n(e),t.value&&(K.value=!1,B()))}finally{X.value=!1}}})))},{getList:B,setSearchParams:H}=J;B();const M=f("default");g(M,(e=>{M.value=e}));const ee=_().currentRoute.value.fullPath;return g(u,(async e=>{var a;T.set(ee,JSON.stringify(e)),await j(),null==(a=$.value)||a.doLayout()}),{deep:!0}),(a,o)=>{const s=w("Icon");return h(),k(C(e),null,{default:b((()=>[x(C(F),{schema:C(p),onSearch:C(H),onReset:C(H)},null,8,["schema","onSearch","onReset"]),D("div",G,[x(C(V),{gutter:10},{default:b((()=>[x(C(A),{span:1.5},{default:b((()=>[x(C(P),{type:"primary",onClick:Y},{default:b((()=>[R(z(C(O)("exampleDemo.add")),1)])),_:1})])),_:1})])),_:1}),x(C(t),{onGetList:C(B),"table-size":M.value,"onUpdate:tableSize":o[0]||(o[0]=e=>M.value=e),columns:C(u),"onUpdate:columns":o[1]||(o[1]=e=>L(u)?u.value=e:null),"cache-table-headers-key":C(ee)},null,8,["onGetList","table-size","columns","cache-table-headers-key"])]),x(C(l),{limit:C(I).limit,"onUpdate:limit":o[2]||(o[2]=e=>C(I).limit=e),page:C(I).page,"onUpdate:page":o[3]||(o[3]=e=>C(I).page=e),columns:C(u),data:C(I).tableData,loading:C(I).loading,selection:!1,pagination:{total:C(I).count},border:!0,size:M.value,onRegister:C(W)},{action:b((({row:e})=>[x(C(P),{type:"primary",link:"",size:"small",onClick:a=>(async e=>{const a=await i(e.id);a&&(N.value="编辑",I.currentRow=a.data,K.value=!0,Q.value="edit")})(e)},{default:b((()=>[R(z(C(O)("exampleDemo.edit")),1)])),_:2},1032,["onClick"]),x(C(P),{type:"danger",link:"",size:"small",onClick:a=>(async e=>{const{delListApi:a}=J;await a(!0,[e.id])})(e)},{default:b((()=>[R(z(C(O)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),dict_type:b((({row:e})=>[x(s,{icon:"material-symbols:content-copy-rounded",class:"cursor-pointer",onClick:a=>(async e=>{const{copy:a}=S();return await a(e),U.success("复制成功")})(e.dict_type)},null,8,["onClick"]),x(C(P),{type:"primary",link:"",onClick:a=>(e=>{E(`/system/dict/detail?dictType=${e.id}`)})(e)},{default:b((()=>[R(z(e.dict_type),1)])),_:2},1032,["onClick"])])),_:1},8,["limit","page","columns","data","loading","pagination","size","onRegister"]),x(C(c),{modelValue:K.value,"onUpdate:modelValue":o[5]||(o[5]=e=>K.value=e),title:N.value,width:"700px"},{footer:b((()=>[x(C(P),{type:"primary",loading:X.value,onClick:q},{default:b((()=>[R(z(C(O)("exampleDemo.save")),1)])),_:1},8,["loading"]),x(C(P),{onClick:o[4]||(o[4]=e=>K.value=!1)},{default:b((()=>[R(z(C(O)("dialogDemo.close")),1)])),_:1})])),default:b((()=>[x(m,{ref_key:"writeRef",ref:Z,"current-row":C(I).currentRow},null,8,["current-row"])])),_:1},8,["modelValue","title"])])),_:1})}}});export{T as default};
