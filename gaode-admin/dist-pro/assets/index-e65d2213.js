import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-b07c8c79.js";import{u as a,_ as t,a as l}from"./RightToolbar.vue_vue_type_script_setup_true_lang-44d08f8c.js";import{a0 as s,L as o,e as i,P as r,r as p,w as n,K as d,aa as m,o as u,l as c,m as _,x as h,k as f,y as b,ab as v,D as w,z as g}from"./index-dc787e95.js";import{E as j}from"./el-button-adf54e9f.js";import{E as y}from"./el-switch-54b2e8b0.js";import{a as x}from"./el-col-8a867eaa.js";import{_ as S}from"./Dialog.vue_vue_type_style_index_0_lang-62a93a72.js";import{_ as P}from"./Detail.vue_vue_type_script_setup_true_lang-a89029ed.js";import{_ as R}from"./Search.vue_vue_type_script_setup_true_lang-d97129cd.js";import{s as L}from"./dict-ab5a6743.js";import{u as k}from"./dict-37e95629.js";import"./el-card-4ec964b4.js";import"./el-popper-06627937.js";import"./use-form-common-props-e92a1987.js";import"./el-popover-85004fb7.js";import"./el-checkbox-8998332c.js";import"./event-5568c9d8.js";import"./use-form-item-cb2ecb0c.js";import"./el-divider-7e837124.js";import"./useForm-0cf5fadd.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./index-7a6ce827.js";import"./index-2bc17c13.js";import"./el-overlay-9a40cbcb.js";import"./vnode-7d8ea85e.js";import"./el-dropdown-item-978ba092.js";import"./use-dialog-30a6a371.js";import"./Descriptions-92b0e991.js";import"./dict-416d98d1.js";const z=e=>s.get({url:"/vadmin/record/logins",params:e}),C=o([{field:"id",label:"编号",show:!0,disabled:!0,width:"120px",span:24},{field:"telephone",label:"手机号",width:"150px",show:!0,disabled:!0,span:24},{field:"status",label:"登录状态",width:"100px",show:!0,span:24},{field:"platform",label:"登录平台",width:"150px",show:!0,span:24},{field:"login_method",label:"认证方式",width:"150px",show:!0,span:24},{field:"ip",label:"登录地址",show:!0,disabled:!0,width:"150px",span:24},{field:"address",label:"登录地点",show:!0,span:24},{field:"postal_code",label:"邮政编码",show:!1,span:24},{field:"area_code",label:"地区区号",show:!1,span:24},{field:"browser",label:"浏览器",show:!0,span:24},{field:"system",label:"操作系统",show:!0,span:24},{field:"response",label:"响应信息",show:!1,disabled:!0,span:24},{field:"request",label:"请求信息",show:!1,disabled:!0,span:24},{field:"create_datetime",label:"创建时间",show:!0,span:24,sortable:!0},{field:"action",label:"操作",show:!0,disabled:!1,width:"100px",span:24}]),D=o([{field:"telephone",label:"手机号",component:"Input",componentProps:{clearable:!1,style:{width:"214px"}}},{field:"platform",label:"登录平台",component:"Select",componentProps:{style:{width:"214px"},options:[]}},{field:"ip",label:"登录地址",component:"Input",componentProps:{clearable:!1,style:{width:"214px"}}},{field:"address",label:"登录地点",component:"Input",componentProps:{clearable:!1,style:{width:"214px"}}},{field:"status",label:"登录状态",component:"Select",componentProps:{style:{width:"214px"},options:[{label:"登录成功",value:!0},{label:"登录失败",value:!1}]}}]),U={class:"mb-8px flex justify-between"},O=i({name:"SystemRecordLogin",setup(s){const{wsCache:o}=r(),{register:i,elTableRef:O,tableObject:V,methods:E}=a({getListApi:z,response:{data:"data",count:"count"},defaultParams:{v_order:"descending",v_order_field:"create_datetime"}}),I=p(!1),F=p(""),G=p([]),T=p([]),W=p([]);(async()=>{const e=k(),a=await e.getDictObj(["sys_vadmin_platform","sys_vadmin_login_method"]);G.value=a.sys_vadmin_platform,T.value=a.sys_vadmin_login_method,W.value.push({field:"platform",path:"componentProps.options",value:a.sys_vadmin_platform})})();const{getList:q,setSearchParams:A,setOrderParams:J}=E,K=p("default");n(K,(e=>{K.value=e}));const N=d().currentRoute.value.fullPath;return n(C,(async e=>{var a;o.set(N,JSON.stringify(e)),await m(),null==(a=O.value)||a.doLayout()}),{deep:!0}),q(),(a,s)=>(u(),c(f(e),null,{default:_((()=>[h(f(R),{schema:f(D),setSchemaList:W.value,onSearch:f(A),onReset:f(A)},null,8,["schema","setSchemaList","onSearch","onReset"]),b("div",U,[h(f(x)),h(f(t),{onGetList:f(q),"table-size":K.value,"onUpdate:tableSize":s[0]||(s[0]=e=>K.value=e),columns:f(C),"onUpdate:columns":s[1]||(s[1]=e=>v(C)?C.value=e:null),"cache-table-headers-key":f(N)},null,8,["onGetList","table-size","columns","cache-table-headers-key"])]),h(f(l),{limit:f(V).limit,"onUpdate:limit":s[2]||(s[2]=e=>f(V).limit=e),page:f(V).page,"onUpdate:page":s[3]||(s[3]=e=>f(V).page=e),defaultSort:{prop:"create_datetime",order:"descending"},columns:f(C),data:f(V).tableData,loading:f(V).loading,selection:!1,size:K.value,border:!0,pagination:{total:f(V).count},onRegister:f(i),onSortChange:f(J)},{action:_((({row:e})=>[h(f(j),{type:"primary",link:"",size:"small",onClick:a=>(e=>{F.value="登录详情",V.currentRow=e,I.value=!0})(e)},{default:_((()=>[w(" 详情 ")])),_:2},1032,["onClick"])])),status:_((({row:e})=>[h(f(y),{value:e.status,size:"small",disabled:""},null,8,["value"])])),platform:_((({row:e})=>[w(g(f(L)(G.value,e.platform)),1)])),login_method:_((({row:e})=>[w(g(f(L)(T.value,e.login_method)),1)])),_:1},8,["limit","page","columns","data","loading","size","pagination","onRegister","onSortChange"]),h(f(S),{modelValue:I.value,"onUpdate:modelValue":s[4]||(s[4]=e=>I.value=e),title:F.value,width:"900px"},{default:_((()=>[h(P,{"detail-schema":f(C),"current-row":f(V).currentRow},null,8,["detail-schema","current-row"])])),_:1},8,["modelValue","title"])])),_:1}))}});export{O as default};
