import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-b07c8c79.js";import{u as a,_ as s,a as t}from"./RightToolbar.vue_vue_type_script_setup_true_lang-44d08f8c.js";import{c as o,d as i,a as l}from"./issue-fd8ae597.js";import{c as r,a as p}from"./issue.data-090d6248.js";import{e as n,P as m,G as u,r as c,w as d,K as _,aa as v,o as f,l as j,m as h,x as g,k as y,y as b,D as k,ab as x,z as w}from"./index-dc787e95.js";import{a as z,E as L}from"./el-col-8a867eaa.js";import{E as S}from"./el-button-adf54e9f.js";import{E as C}from"./el-switch-54b2e8b0.js";import{_ as R}from"./Search.vue_vue_type_script_setup_true_lang-d97129cd.js";import"./el-card-4ec964b4.js";import"./el-popper-06627937.js";import"./use-form-common-props-e92a1987.js";import"./el-popover-85004fb7.js";import"./el-checkbox-8998332c.js";import"./event-5568c9d8.js";import"./use-form-item-cb2ecb0c.js";import"./el-divider-7e837124.js";import"./useForm-0cf5fadd.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./index-7a6ce827.js";import"./index-2bc17c13.js";import"./el-overlay-9a40cbcb.js";import"./vnode-7d8ea85e.js";import"./el-dropdown-item-978ba092.js";const P={class:"mb-8px flex justify-between"},A=n({name:"HelpIssue",setup(n){const{wsCache:A}=m(),{t:D}=u(),{register:U,elTableRef:E,tableObject:G,methods:O}=a({getListApi:o,delListApi:i,response:{data:"data",count:"count"}}),{getList:T,setSearchParams:$}=O,F=c("default");d(F,(e=>{F.value=e}));const{currentRoute:H,push:I}=_(),J=H.value.fullPath;d(r,(async e=>{var a;A.set(J,JSON.stringify(e)),await v(),null==(a=E.value)||a.doLayout()}),{deep:!0});const K=c([]);(async()=>{const e=await l();e&&K.value.push({field:"category_id",path:"componentProps.options",value:e.data})})();const N=async()=>{I("/help/issue/form")};return T(),(a,o)=>(f(),j(y(e),null,{default:h((()=>[g(y(R),{schema:y(p),setSchemaList:K.value,onSearch:y($),onReset:y($)},null,8,["schema","setSchemaList","onSearch","onReset"]),b("div",P,[g(y(z),null,{default:h((()=>[g(y(L),{span:1.5},{default:h((()=>[g(y(S),{type:"primary",onClick:N},{default:h((()=>[k("新增问题")])),_:1})])),_:1})])),_:1}),g(y(s),{onGetList:y(T),"table-size":F.value,"onUpdate:tableSize":o[0]||(o[0]=e=>F.value=e),columns:y(r),"onUpdate:columns":o[1]||(o[1]=e=>x(r)?r.value=e:null),"cache-table-headers-key":y(J)},null,8,["onGetList","table-size","columns","cache-table-headers-key"])]),g(y(t),{limit:y(G).limit,"onUpdate:limit":o[2]||(o[2]=e=>y(G).limit=e),page:y(G).page,"onUpdate:page":o[3]||(o[3]=e=>y(G).page=e),columns:y(r),data:y(G).tableData,loading:y(G).loading,selection:!1,size:F.value,border:!0,pagination:{total:y(G).count},onRegister:y(U)},{is_active:h((({row:e})=>[g(y(C),{value:e.is_active,size:"small",disabled:""},null,8,["value"])])),action:h((({row:e})=>[g(y(S),{type:"primary",link:"",size:"small",onClick:a=>(async e=>{I(`/help/issue/form?id=${e.id}`)})(e)},{default:h((()=>[k(w(y(D)("exampleDemo.edit")),1)])),_:2},1032,["onClick"]),g(y(S),{type:"danger",link:"",size:"small",onClick:a=>(async e=>{const{delListApi:a}=O;await a(!0,[e.id])})(e)},{default:h((()=>[k(w(y(D)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["limit","page","columns","data","loading","size","pagination","onRegister"])])),_:1}))}});export{A as default};
