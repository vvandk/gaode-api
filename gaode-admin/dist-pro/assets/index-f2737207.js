import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-b07c8c79.js";import{u as a,_ as l,a as t}from"./RightToolbar.vue_vue_type_script_setup_true_lang-44d08f8c.js";import{g as o,d as s,a as i,p as u}from"./menu-49936113.js";import{e as r,P as n,G as d,r as m,w as p,K as c,aa as v,a8 as _,ae as f,o as y,l as j,m as w,y as g,x as h,k as b,af as k,D as x,ab as C,z as D,j as R,M as z}from"./index-dc787e95.js";import{E as L}from"./el-button-adf54e9f.js";import{E as V}from"./el-switch-54b2e8b0.js";import{a as A,E as P}from"./el-col-8a867eaa.js";import{_ as E}from"./Dialog.vue_vue_type_style_index_0_lang-62a93a72.js";import{c as F,_ as G}from"./Write.vue_vue_type_script_setup_true_lang-692dad3f.js";import{u as O}from"./dict-37e95629.js";import{s as U}from"./dict-ab5a6743.js";import"./el-card-4ec964b4.js";import"./el-popper-06627937.js";import"./use-form-common-props-e92a1987.js";import"./el-popover-85004fb7.js";import"./el-checkbox-8998332c.js";import"./event-5568c9d8.js";import"./use-form-item-cb2ecb0c.js";import"./el-divider-7e837124.js";import"./useForm-0cf5fadd.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./index-7a6ce827.js";import"./index-2bc17c13.js";import"./el-overlay-9a40cbcb.js";import"./vnode-7d8ea85e.js";import"./el-dropdown-item-978ba092.js";import"./use-dialog-30a6a371.js";import"./useValidator-ce35917e.js";import"./dict-416d98d1.js";const W={class:"mb-8px flex justify-between"},M={key:0},S=r({name:"AuthMenu",setup(r){const{wsCache:S}=n(),{t:T}=d();let I=m([]);(async()=>{const e=O(),a=await e.getDictObj(["sys_vadmin_menu_type"]);I.value=a.sys_vadmin_menu_type})();const{register:J,elTableRef:K,tableObject:N,methods:Q}=a({getListApi:o,delListApi:s,response:{data:"data"}}),X=m(!1),Y=m(""),Z=m(""),$=m(),q=()=>{$.value=null,Y.value=T("exampleDemo.add"),N.currentRow=null,X.value=!0,Z.value="add"},B=m(!1),H=m(),ee=async()=>{var e;const a=b(H);await(null==(e=null==a?void 0:a.elFormRef)?void 0:e.validate((async e=>{if(e){B.value=!0;const e=await(null==a?void 0:a.getFormData());try{const a=m({});"add"===Z.value?(a.value=await i(e),a.value&&(X.value=!1,ae())):"edit"===Z.value&&(a.value=await u(e),a.value&&(X.value=!1,ae()))}finally{B.value=!1}}})))},{getList:ae}=Q;ae();const le=m("default");p(le,(e=>{le.value=e}));const te=c().currentRoute.value.fullPath;return p(F,(async e=>{var a;S.set(te,JSON.stringify(e)),await v(),null==(a=K.value)||a.doLayout()}),{deep:!0}),(a,o)=>{const s=_("Icon"),i=f("hasPermi");return y(),j(b(e),null,{default:w((()=>[g("div",W,[h(b(A),{gutter:10},{default:w((()=>[h(b(P),{span:1.5},{default:w((()=>[k((y(),j(b(L),{type:"primary",onClick:q},{default:w((()=>[x("新增菜单")])),_:1})),[[i,["auth.menu.create"]]])])),_:1})])),_:1}),h(b(l),{onGetList:b(ae),"table-size":le.value,"onUpdate:tableSize":o[0]||(o[0]=e=>le.value=e),columns:b(F),"onUpdate:columns":o[1]||(o[1]=e=>C(F)?F.value=e:null),"cache-table-headers-key":b(te)},null,8,["onGetList","table-size","columns","cache-table-headers-key"])]),h(b(t),{data:b(N).tableData,loading:b(N).loading,selection:!1,columns:b(F),border:!0,size:le.value,"row-key":"id","default-expand-all":"",onRegister:b(J)},{title:w((({row:e})=>[x(D(b(T)(e.title)),1)])),icon:w((({row:e})=>[e.icon?(y(),R("div",M,[h(s,{icon:e.icon},null,8,["icon"])])):z("",!0)])),action:w((({row:e})=>[k((y(),j(b(L),{type:"primary",link:"",size:"small",onClick:a=>(e=>{$.value=null,Y.value="编辑",N.currentRow=e,X.value=!0,Z.value="edit"})(e)},{default:w((()=>[x(D(b(T)("exampleDemo.edit")),1)])),_:2},1032,["onClick"])),[[i,["auth.menu.update"]]]),k((y(),j(b(L),{type:"primary",link:"",size:"small",onClick:a=>(async e=>{$.value=e.id,Y.value=T("exampleDemo.add"),N.currentRow=null,X.value=!0,Z.value="add"})(e)},{default:w((()=>[x(" 添加子菜单 ")])),_:2},1032,["onClick"])),[[i,["auth.menu.create"]]]),k((y(),j(b(L),{type:"danger",link:"",size:"small",onClick:a=>(async e=>{$.value=null;const{delListApi:a}=Q;await a(!0,[e.id])})(e)},{default:w((()=>[x(D(b(T)("exampleDemo.del")),1)])),_:2},1032,["onClick"])),[[i,["auth.menu.delete"]]])])),menu_type:w((({row:e})=>[g("span",null,D(b(U)(b(I),e.menu_type)),1)])),hidden:w((({row:e})=>[h(b(V),{value:!e.hidden,disabled:""},null,8,["value"])])),noCache:w((({row:e})=>[h(b(V),{value:!e.noCache,disabled:""},null,8,["value"])])),disabled:w((({row:e})=>[h(b(V),{value:!e.disabled,disabled:""},null,8,["value"])])),_:1},8,["data","loading","columns","size","onRegister"]),h(b(E),{modelValue:X.value,"onUpdate:modelValue":o[3]||(o[3]=e=>X.value=e),title:Y.value,width:"800px"},{footer:w((()=>[h(b(L),{type:"primary",loading:B.value,onClick:ee},{default:w((()=>[x(D(b(T)("exampleDemo.save")),1)])),_:1},8,["loading"]),h(b(L),{onClick:o[2]||(o[2]=e=>X.value=!1)},{default:w((()=>[x(D(b(T)("dialogDemo.close")),1)])),_:1})])),default:w((()=>[h(G,{ref_key:"writeRef",ref:H,"current-row":b(N).currentRow,"parent-id":$.value},null,8,["current-row","parent-id"])])),_:1},8,["modelValue","title"])])),_:1})}}});export{S as default};
