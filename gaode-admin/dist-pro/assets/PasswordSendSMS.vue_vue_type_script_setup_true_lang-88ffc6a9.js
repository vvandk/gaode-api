import{e,r as a,o as s,j as t,y as r,x as l,m as n,D as i,k as d,l as o,M as p,a6 as u,ap as f}from"./index-dc787e95.js";import{E as c}from"./el-button-adf54e9f.js";import{E as _,a as m}from"./el-popover-85004fb7.js";import"./el-checkbox-8998332c.js";import"./el-popper-06627937.js";import{E as y}from"./el-popconfirm-1d6b4668.js";import{E as w}from"./index-7a6ce827.js";const g={class:"flex justify-between"},k=r("span",null,"已选用户列表",-1),v=e({__name:"PasswordSendSMS",props:{selections:{type:Object}},setup(e){const v=e,b=a(JSON.parse(JSON.stringify(v.selections))),h=a(!1),x=async()=>{h.value=!0;const e=b.value.filter((e=>!0!==e.reset_password_status)).map((e=>e.id));if(e.length<=0)return u.warning("已全部重置完成，无需重复操作");try{const a=await f(e);a&&(b.value=a.data,u.success("重置成功"))}finally{h.value=!1}};return(e,a)=>{var u;return s(),t("div",null,[r("div",g,[k,l(d(c),{type:"primary",disabled:0===(null==(u=b.value)?void 0:u.length),loading:h.value,onClick:x},{default:n((()=>[i("确认重置并发送短信通知")])),_:1},8,["disabled","loading"])]),l(d(m),{data:b.value,stripe:!0,border:!0,style:{width:"100%"},class:"mt-10px","max-height":"500px"},{default:n((()=>[l(d(_),{prop:"id",label:"用户编号",width:"100",align:"center"}),l(d(_),{prop:"name",label:"姓名",width:"120",align:"center"}),l(d(_),{prop:"telephone",label:"手机号",width:"120",align:"center"}),l(d(_),{prop:"reset_password_status",label:"重置状态",width:"100",align:"center"},{default:n((e=>[!0===e.row.reset_password_status?(s(),o(d(w),{key:0,type:"success",effect:"dark"},{default:n((()=>[i(" 重置成功 ")])),_:1})):!1===e.row.reset_password_status?(s(),o(d(w),{key:1,type:"danger",effect:"dark"},{default:n((()=>[i(" 重置失败 ")])),_:1})):(s(),o(d(w),{key:2,type:"warning",effect:"dark"},{default:n((()=>[i(" 待重置 ")])),_:1}))])),_:1}),l(d(_),{prop:"send_sms_status",label:"发送状态",width:"100",align:"center"},{default:n((e=>[!0===e.row.send_sms_status?(s(),o(d(w),{key:0,type:"success",effect:"dark"},{default:n((()=>[i(" 发送成功 ")])),_:1})):!1===e.row.send_sms_status?(s(),o(d(w),{key:1,type:"danger",effect:"dark"},{default:n((()=>[i(" 发送失败 ")])),_:1})):(s(),o(d(w),{key:2,type:"warning",effect:"dark"},{default:n((()=>[i(" 待发送 ")])),_:1}))])),_:1}),l(d(_),{prop:"send_sms_msg",label:"描述",align:"center"}),l(d(_),{fixed:"right",label:"操作",width:"100",align:"center"},{default:n((e=>[l(d(y),{title:"确认移除吗?",onConfirm:a=>{return s=e.$index,void b.value.splice(s,1);var s}},{reference:n((()=>[!0!==e.row.send_sms_status?(s(),o(d(c),{key:0,link:"",type:"primary",size:"small"},{default:n((()=>[i("移除")])),_:1})):p("",!0)])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])])}}});export{v as _};
